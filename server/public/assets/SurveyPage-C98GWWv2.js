import{k as y,h as u,n as k,c as s,g as S,r as D,V as Y,W as U,z as K,X,Y as Q,Z as E,$ as Z,a0 as G,_ as ee,C as q,L as J,M as v,D as B,E as c,f as d,N as h,O as b,U as z,a1 as te,F as ae,a2 as oe,a3 as ne,S as V}from"./index-C3yQdePZ.js";import{m as x,n as _,b as le,o as se,l as re,Q as ie,j,k as I}from"./QSelect-CRVH1WXZ.js";import"./scroll-CuwOHpmS.js";const P=y({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(e,{slots:t}){const a=s(()=>`q-card__section q-card__section--${e.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>u(e.tag,{class:a.value},k(t.default))}}),R=y({name:"QCard",props:{...x,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(e,{slots:t}){const{proxy:{$q:a}}=S(),r=_(e,a),n=s(()=>"q-card"+(r.value===!0?" q-card--dark q-dark":"")+(e.bordered===!0?" q-card--bordered":"")+(e.square===!0?" q-card--square no-border-radius":"")+(e.flat===!0?" q-card--flat no-shadow":""));return()=>u(e.tag,{class:n.value},k(t.default))}});function ue(e,t){const a=D(null),r=s(()=>e.disable===!0?null:u("span",{ref:a,class:"no-outline",tabindex:-1}));function n(i){const l=t.value;i?.qAvoidFocus!==!0&&(i?.type.indexOf("key")===0?document.activeElement!==l&&l?.contains(document.activeElement)===!0&&l.focus():a.value!==null&&(i===void 0||l?.contains(i.target)===!0)&&a.value.focus())}return{refocusTargetEl:r,refocusTarget:n}}const ce={xs:30,sm:35,md:40,lg:50,xl:60},de=()=>u("svg",{key:"svg",class:"q-radio__bg absolute non-selectable",viewBox:"0 0 24 24"},[u("path",{d:"M12,22a10,10 0 0 1 -10,-10a10,10 0 0 1 10,-10a10,10 0 0 1 10,10a10,10 0 0 1 -10,10m0,-22a12,12 0 0 0 -12,12a12,12 0 0 0 12,12a12,12 0 0 0 12,-12a12,12 0 0 0 -12,-12"}),u("path",{class:"q-radio__check",d:"M12,6a6,6 0 0 0 -6,6a6,6 0 0 0 6,6a6,6 0 0 0 6,-6a6,6 0 0 0 -6,-6"})]),ve=y({name:"QRadio",props:{...x,...Y,...le,modelValue:{required:!0},val:{required:!0},label:String,leftLabel:Boolean,checkedIcon:String,uncheckedIcon:String,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},emits:["update:modelValue"],setup(e,{slots:t,emit:a}){const{proxy:r}=S(),n=_(e,r.$q),i=X(e,ce),l=D(null),{refocusTargetEl:g,refocusTarget:f}=ue(e,l),m=s(()=>Q(e.modelValue)===Q(e.val)),C=s(()=>"q-radio cursor-pointer no-outline row inline no-wrap items-center"+(e.disable===!0?" disabled":"")+(n.value===!0?" q-radio--dark":"")+(e.dense===!0?" q-radio--dense":"")+(e.leftLabel===!0?" reverse":"")),L=s(()=>{const o=e.color!==void 0&&(e.keepColor===!0||m.value===!0)?` text-${e.color}`:"";return`q-radio__inner relative-position q-radio__inner--${m.value===!0?"truthy":"falsy"}${o}`}),T=s(()=>(m.value===!0?e.checkedIcon:e.uncheckedIcon)||null),N=s(()=>e.disable===!0?-1:e.tabindex||0),O=s(()=>{const o={type:"radio"};return e.name!==void 0&&Object.assign(o,{".checked":m.value===!0,"^checked":m.value===!0?"checked":void 0,name:e.name,value:e.val}),o}),W=se(O);function w(o){o!==void 0&&(E(o),f(o)),e.disable!==!0&&m.value!==!0&&a("update:modelValue",e.val,o)}function F(o){(o.keyCode===13||o.keyCode===32)&&E(o)}function H(o){(o.keyCode===13||o.keyCode===32)&&w(o)}Object.assign(r,{set:w});const M=de();return()=>{const o=T.value!==null?[u("div",{key:"icon",class:"q-radio__icon-container absolute-full flex flex-center no-wrap"},[u(U,{class:"q-radio__icon",name:T.value})])]:[M];e.disable!==!0&&W(o,"unshift"," q-radio__native q-ma-none q-pa-none");const p=[u("div",{class:L.value,style:i.value,"aria-hidden":"true"},o)];g.value!==null&&p.push(g.value);const $=e.label!==void 0?K(t.default,[e.label]):k(t.default);return $!==void 0&&p.push(u("div",{class:"q-radio__label q-anchor--skip"},$)),u("div",{ref:l,class:C.value,tabindex:N.value,role:"radio","aria-label":e.label,"aria-checked":m.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:w,onKeydown:F,onKeyup:H},p)}}}),me=["ul","ol"],fe=y({name:"QList",props:{...x,bordered:Boolean,dense:Boolean,separator:Boolean,padding:Boolean,tag:{type:String,default:"div"}},setup(e,{slots:t}){const a=S(),r=_(e,a.proxy.$q),n=s(()=>me.includes(e.tag)?null:"list"),i=s(()=>"q-list"+(e.bordered===!0?" q-list--bordered":"")+(e.dense===!0?" q-list--dense":"")+(e.separator===!0?" q-list--separator":"")+(r.value===!0?" q-list--dark":"")+(e.padding===!0?" q-list--padding":""));return()=>u(e.tag,{class:i.value,role:n.value},k(t.default))}}),ge={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},A={xs:2,sm:4,md:8,lg:16,xl:24},he=y({name:"QSeparator",props:{...x,spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},setup(e){const t=S(),a=_(e,t.proxy.$q),r=s(()=>e.vertical===!0?"vertical":"horizontal"),n=s(()=>` q-separator--${r.value}`),i=s(()=>e.inset!==!1?`${n.value}-${ge[e.inset]}`:""),l=s(()=>`q-separator${n.value}${i.value}`+(e.color!==void 0?` bg-${e.color}`:"")+(a.value===!0?" q-separator--dark":"")),g=s(()=>{const f={};if(e.size!==void 0&&(f[e.vertical===!0?"width":"height"]=e.size),e.spaced!==!1){const m=e.spaced===!0?`${A.md}px`:e.spaced in A?`${A[e.spaced]}px`:e.spaced,C=e.vertical===!0?["Left","Right"]:["Top","Bottom"];f[`margin${C[0]}`]=f[`margin${C[1]}`]=m}return f});return()=>u("hr",{class:l.value,style:g.value,"aria-orientation":r.value})}}),be=y({name:"QCardActions",props:{...Z,vertical:Boolean},setup(e,{slots:t}){const a=G(e),r=s(()=>`q-card__actions ${a.value} q-card__actions--${e.vertical===!0?"vert column":"horiz row"}`);return()=>u("div",{class:r.value},k(t.default))}}),ye={data(){return{error:!1,saved:!1,user:null,id:null,jobTitles:[],selected:null,options:["title","jobs","employers","wage"],sort:"title"}},computed:{windowHeight(){return window.innerHeight},cardHeight(){return window.innerHeight>700?"height: calc(100vh - 450px);":"height: calc(100vh - 270px);"}},watch:{sort(){this.sortJobTitles(this.jobTitles)}},methods:{sortJobTitles(e){this.jobTitles=e.sort((t,a)=>{switch(this.sort){case"title":return t.JobTitle>a.JobTitle?1:t.JobTitle<a.JobTitle?-1:0;case"jobs":return t.JobCount<a.JobCount?1:t.JobCount>a.JobCount?-1:0;case"employers":return t.EmployerCount<a.EmployerCount?1:t.EmployerCount>a.EmployerCount?-1:0;case"wage":return t.AvgAnnualWage<a.AvgAnnualWage?1:t.AvgAnnualWage>a.AvgAnnualWage?-1:0}})},async saveChoice(){const e={email:this.user,SchoolID:this.id,JobTitle:this.selected,CreatorEmail:"innni2324@gmail.com"};await fetch("http://localhost:3000/api/survey",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then(()=>{this.saved=!0,this.$q.notify({message:"Your choice has been recorded. Thank you!",color:"positive"})})}},mounted(){typeof this.$route.query.user<"u"&&typeof this.$route.query.id<"u"&&(this.user=this.$route.query.user,this.id=this.$route.query.id,fetch("http://localhost:3000/api/joblist").then(e=>e.json()).then(e=>{this.sortJobTitles(e)}))}},qe={class:"row"},ke={class:"col-8",style:{margin:"auto"}},Ce={class:"q-py-md"};function Se(e,t,a,r,n,i){return q(),J("div",null,[t[6]||(t[6]=v("h3",{class:"gt-sm text-center q-my-md"},"Pick your favorite job",-1)),t[7]||(t[7]=v("h5",{class:"lt-md text-center q-my-md"},"Pick your favorite job",-1)),v("div",qe,[v("div",ke,[i.windowHeight>700?(q(),B(R,{key:0},{default:c(()=>[d(P,null,{default:c(()=>[v("p",null,"Below is the list of "+h(n.jobTitles.length)+" in-demand jobs in New York City. Pick your favorite job.",1),t[2]||(t[2]=v("p",null,[v("span",{class:"text-bold"},"Your privacy:"),b(" This is an anonymous poll. Your name will not be visible to others. You can change your choice at any time.")],-1)),t[3]||(t[3]=v("p",{class:"q-mb-none"},[v("span",{class:"text-bold"},"SAVE your choice: "),b("Scroll through the list. Make a selection, then save your choice.")],-1))]),_:1})]),_:1})):z("",!0),d(R,{class:"q-mt-sm"},{default:c(()=>[d(P,null,{default:c(()=>[v("div",Ce,[d(re,{outlined:"",modelValue:n.sort,"onUpdate:modelValue":t[0]||(t[0]=l=>n.sort=l),options:n.options,label:"Sort"},null,8,["modelValue","options"])]),d(fe,{bordered:"",separator:"",style:te(i.cardHeight),class:"overflow-auto"},{default:c(()=>[(q(!0),J(ae,null,oe(n.jobTitles,(l,g)=>(q(),B(ie,{key:g},{default:c(()=>[d(j,{avatar:""},{default:c(()=>[d(ve,{modelValue:n.selected,"onUpdate:modelValue":t[1]||(t[1]=f=>n.selected=f),val:l.JobTitle},null,8,["modelValue","val"])]),_:2},1024),d(j,null,{default:c(()=>[d(I,{class:"text-bold"},{default:c(()=>[b(h(l.JobTitle),1)]),_:2},1024),d(I,{lines:"4"},{default:c(()=>[b("Job Openings: "+h(l.JobCount)+" | Employers: "+h(l.EmployerCount)+" | Avg Annual Wage: $"+h(l.AvgAnnualWage.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"))+" | required education: ",1),v("span",{class:ne(["text-bold",l.RequiredEducation==="mostly college"?"text-red":"text-blue"])},h(l.RequiredEducation),3)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["style"])]),_:1}),d(he,{dark:""}),d(be,{align:"around"},{default:c(()=>[d(V,{color:"green",onClick:i.saveChoice},{default:c(()=>[...t[4]||(t[4]=[b("Save your choice",-1)])]),_:1},8,["onClick"]),n.saved?(q(),B(V,{key:0,color:"blue",to:{name:"Results"}},{default:c(()=>[...t[5]||(t[5]=[b("Show poll results",-1)])]),_:1})):z("",!0)]),_:1})]),_:1})])])])}const pe=ee(ye,[["render",Se]]);export{pe as default};
